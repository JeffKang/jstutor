<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>JSTutor</title>
    <link rel="stylesheet" href="codemirror/lib/codemirror.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="codemirror/lib/codemirror.js"></script>
    <script src="codemirror/mode/javascript/javascript.js"></script>
    <style type="text/css">.CodeMirror {border-top: 1px solid black; border-bottom: 1px solid black;}</style>
  </head>
  <body>
    <h1>JSTutor</h1>
<div><button id="btn">Submit</button></div>
<div id="leftSide">
  <div id="codeContainer"><textarea id="code" name="code">
var sum = function(a, b) {
return a + b;
}
var c = sum(1, 2);
console.log('Hello world!');
console.log(c);
</textarea></div>
  <div id="outputContainer">
  </div>
</div>
<div id="rightSide">
  <div id="debugContainer">
  </div>
</div>
<div style="clear:both"></div>

    <script>
      var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
        autofocus: true,
        lineNumbers: true,
        matchBrackets: true,
        tabSize: 2,
      });
    </script>

    <script src="/socket.io/socket.io.js"></script>
    <script src="js/jquery-1.8.0.min.js"></script>
    <script>
      var socket = io.connect('http://localhost');
      $('#btn').click(function() {
        var code = editor.getValue();
        socket.emit('inspect', code);
      });
      socket.on('output', function(data) {
        console.log('output: ', data);
        $('#outputContainer').append($('<div>').html(data));
      });

      socket.on('loginfo', function(loginfo) {
        console.log('loginfo: ', loginfo);
      });
    </script>
  </body>
</html>
